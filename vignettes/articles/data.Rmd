---
title: "Data"
output:
  html_document:
    toc: true
    toc_depth: 1
---


```{r}
#| echo: false
#| output: false
#| message: false
devtools::load_all()
codec_tbls <- pins::pin_list(codec_board_local_dev())

```

Community-level data are available as [CoDEC](https://geomarker.io/codec) tables in the online data catalog and included with the {[codec](https://github.com/geomarker.io/codec)} R package, version [`r packageVersion('codec')`](https://github.com/geomarker-io/codec/releases):


```{r}
#| echo: false
#| results: asis

increase_md_headers <- function(md_text) {
  lines <- strsplit(md_text, "\n", fixed = TRUE)[[1]]
  lines <- sub("^(#+)", "#\\1", lines) # add one "#" to any existing header
  paste(lines, collapse = "\n")
}

for (nm in codec_tbls) {
  df <- codec_read(nm, codec_board_local_dev())
  md <- attr(df, "description")

  cat("\n\n# **`", nm, "`**\n\n", sep = "")

  cat(increase_md_headers(md))

  cat("\n\n### Glimpse\n\n", "`> tibble::glimpse(codec::codec_read(\"", nm, "\"))`\n\n", sep = "")
  gtxt <- paste(capture.output(tibble::glimpse(df)), collapse = "\n")
  cat("<pre>\n", gtxt, "\n</pre>\n\n", sep = "")
  cat("&nbsp; &nbsp; &nbsp; &nbsp;")
}
```
